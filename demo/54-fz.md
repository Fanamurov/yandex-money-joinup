статус документа: черновик

[![яндекс касса](/i/yakassalogo.png "Яндекс Касса")](https://kassa.yandex.ru) / документация / [http](/demo/010%20интеграция%20для%20самописных%20сайтов.md):arrow_left:, [cms](/demo/011%20интеграция%20для%20CMS%20и%20SaaS.md), [email](/010%20интеграция%20email.md), [тестирование](/demo/030%20тестирование.md), [решение ошибок](/demo/031%20решение%20ошибок.md), [демо](/demo/032%20демо%20стенд.md)

54-ФЗ. Нюансы интеграции и необходимые доработки
================================================

### Требования к доработке
- [x] Зарегистрируйтесь в Атол или МодульКассе. Получите у них идентификаторы для фискализации.
- [x] Впишите полученные идентификаторы в Личном Кабинете Яндекс.Кассы https://kassa.yandex.ru/blog/lk54fz
- [ ] Если у вас сайт на CMS, обновить платежный модуль. Если самописный сайт, то дорабойте скрипты, чтобы из платежной формы передались нужные параметры в ym_merchant_receipt.

> Внимание! Как только вы пропишите идентификаторы фискализации в личном кабинете Яндекс.Кассы, практически сразу эти настройки попадут в нашу систему и после этого, если вы не будете передавать ym_merchant_receipt, платежи перестанут работать. Поэтому в Личном кабинете прописывайте эти настройки тогда, когда уверены, что все работает корректно.

### ym_merchant_receipt

Кроме всех параметров, что вы передавали раньше из платежной формы, при включении фискализации, нужно передавать состав корзины в параметре `ym_merchant_receipt`.

Пример1:
```html
<input name="ym_merchant_receipt"
  value="{"customerContact": "+79123456543",
        "taxSystem": 1,
          "items":[
            {"quantity": 1.154,"price": {"amount": 300.23},"tax": 3,"text": "Товар А"},
            {"quantity": 2,"price": {"amount": 200.00},"tax": 3,"text": "Товар Б"}
                  ]}"
type="hidden"/>
```

Пример2:
```html
<input name="ym_merchant_receipt"
  value="{"customerContact": "inbox@usermail.tld",
        "taxSystem": 1,
          "items":[
            {"quantity": 1.154,"price": {"amount": 300.23},"tax": 3,"text": "Товар А"},
            {"quantity": 2,"price": {"amount": 200.00},"tax": 3,"text": "Товар Б"}
                  ]}"
type="hidden"/>
```
Документация https://tech.yandex.ru/money/doc/payment-solution/payment-form/payment-form-receipt-docpage/
